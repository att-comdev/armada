{
  "comments": [
    {
      "key": {
        "uuid": "71bc813a_514155a0",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 11,
      "author": {
        "id": 1011942
      },
      "writtenOn": "2018-05-08T14:27:25Z",
      "side": 1,
      "message": "DON\u0027T wait",
      "range": {
        "startLine": 11,
        "startChar": 16,
        "endLine": 11,
        "endChar": 20
      },
      "revId": "8e077040e1ee4492d7ab91db45eb8a6bdd841c75",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dc529290_524311a5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 11,
      "author": {
        "id": 1012987
      },
      "writtenOn": "2018-05-08T15:12:09Z",
      "side": 1,
      "message": "ha oops... this is more like skip both test and wait, on dry-run",
      "parentUuid": "71bc813a_514155a0",
      "range": {
        "startLine": 11,
        "startChar": 16,
        "endLine": 11,
        "endChar": 20
      },
      "revId": "8e077040e1ee4492d7ab91db45eb8a6bdd841c75",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5fa17776_dbf7c993",
        "filename": "armada/handlers/armada.py",
        "patchSetId": 2
      },
      "lineNbr": 295,
      "author": {
        "id": 1011942
      },
      "writtenOn": "2018-05-08T14:27:25Z",
      "side": 1,
      "message": "I think that if our use case is to not wait during a dry run then that should be conveyed in documentation as it appears that Tiller can work with both dry_run\u003dTrue and wait\u003e0.",
      "range": {
        "startLine": 295,
        "startChar": 28,
        "endLine": 295,
        "endChar": 40
      },
      "revId": "8e077040e1ee4492d7ab91db45eb8a6bdd841c75",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bf42a47d_452194c3",
        "filename": "armada/handlers/armada.py",
        "patchSetId": 2
      },
      "lineNbr": 295,
      "author": {
        "id": 1012987
      },
      "writtenOn": "2018-05-08T15:12:09Z",
      "side": 1,
      "message": "It\u0027s probably a good target for documentation, but the point is simply that there is nothing to wait on while you dry-run. Armada isn\u0027t making any changes to the system on dry-run.",
      "parentUuid": "5fa17776_dbf7c993",
      "range": {
        "startLine": 295,
        "startChar": 28,
        "endLine": 295,
        "endChar": 40
      },
      "revId": "8e077040e1ee4492d7ab91db45eb8a6bdd841c75",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7b6fc5d4_78ee3205",
        "filename": "armada/handlers/armada.py",
        "patchSetId": 2
      },
      "lineNbr": 295,
      "author": {
        "id": 1013519
      },
      "writtenOn": "2018-05-08T15:13:24Z",
      "side": 1,
      "message": "same question as for the tests, what about putting the wait calls in a function e.g. `self._wait_until_ready()` and doing the check for `if not self.dry_run` in it, and having an else which logs \"Skipping wait for ... due to dry run\", that way you can see the waits would have been were it not a dry run.",
      "range": {
        "startLine": 294,
        "startChar": 61,
        "endLine": 295,
        "endChar": 41
      },
      "revId": "8e077040e1ee4492d7ab91db45eb8a6bdd841c75",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "100b1707_3ed8c117",
        "filename": "armada/handlers/armada.py",
        "patchSetId": 2
      },
      "lineNbr": 295,
      "author": {
        "id": 1012987
      },
      "writtenOn": "2018-05-08T15:46:35Z",
      "side": 1,
      "message": "I\u0027m open to reworking the logs or encapsulating into a new function, but i don\u0027t think logging the wait that would have happened is necessarily helpful.  Dry-run is about the changes Tiller would have made to the system.",
      "parentUuid": "7b6fc5d4_78ee3205",
      "range": {
        "startLine": 294,
        "startChar": 61,
        "endLine": 295,
        "endChar": 41
      },
      "revId": "8e077040e1ee4492d7ab91db45eb8a6bdd841c75",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "020be4f5_c6bc6e55",
        "filename": "armada/handlers/armada.py",
        "patchSetId": 2
      },
      "lineNbr": 300,
      "author": {
        "id": 1008770
      },
      "writtenOn": "2018-05-08T02:53:25Z",
      "side": 1,
      "message": "why not move this logic into the 283 if-block?  and change the default value of L285 and L288 to DEFAULT_CHART_TIMEOUT? All this is block is doing is added the conditional check of this_chart_should_wait.",
      "range": {
        "startLine": 297,
        "startChar": 14,
        "endLine": 300,
        "endChar": 56
      },
      "revId": "8e077040e1ee4492d7ab91db45eb8a6bdd841c75",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3459c530_ce50f9f8",
        "filename": "armada/handlers/armada.py",
        "patchSetId": 2
      },
      "lineNbr": 300,
      "author": {
        "id": 1012987
      },
      "writtenOn": "2018-05-08T14:23:59Z",
      "side": 1,
      "message": "It\u0027s possible for the block at 283 to \u003d0 (it doesn\u0027t exist in the chart or overrides), while 292 can \u003dtrue based on other conditions.  Since a positive wait_timeout is one condition to trigger waiting, we still need to handle the DEFAULT wait_timeout after.",
      "parentUuid": "020be4f5_c6bc6e55",
      "range": {
        "startLine": 297,
        "startChar": 14,
        "endLine": 300,
        "endChar": 56
      },
      "revId": "8e077040e1ee4492d7ab91db45eb8a6bdd841c75",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f0a079d4_73fb462e",
        "filename": "armada/handlers/armada.py",
        "patchSetId": 2
      },
      "lineNbr": 308,
      "author": {
        "id": 1013519
      },
      "writtenOn": "2018-05-08T15:13:24Z",
      "side": 1,
      "message": "rather than guarding `self._test_chart()` from being called, would it be better to move the check for `if not self.dry_run` inside of `self._test_chart()` and then have an `else` which logs a message e.g. \"Skipping tests for release %s since it\u0027s a dry-run\", that way you can see what tests would have been run were it not a dry_run.",
      "range": {
        "startLine": 307,
        "startChar": 71,
        "endLine": 308,
        "endChar": 37
      },
      "revId": "8e077040e1ee4492d7ab91db45eb8a6bdd841c75",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0f2dc99c_350c153f",
        "filename": "armada/handlers/armada.py",
        "patchSetId": 2
      },
      "lineNbr": 308,
      "author": {
        "id": 1012987
      },
      "writtenOn": "2018-05-08T15:46:35Z",
      "side": 1,
      "message": "Good idea, I\u0027ll make this update.",
      "parentUuid": "f0a079d4_73fb462e",
      "range": {
        "startLine": 307,
        "startChar": 71,
        "endLine": 308,
        "endChar": 37
      },
      "revId": "8e077040e1ee4492d7ab91db45eb8a6bdd841c75",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5dc07bfc_254aae74",
        "filename": "armada/handlers/armada.py",
        "patchSetId": 2
      },
      "lineNbr": 472,
      "author": {
        "id": 1013519
      },
      "writtenOn": "2018-05-08T15:13:24Z",
      "side": 1,
      "message": "should this wait be guarded by `if not self.dry_run:` as well?",
      "range": {
        "startLine": 467,
        "startChar": 16,
        "endLine": 472,
        "endChar": 34
      },
      "revId": "8e077040e1ee4492d7ab91db45eb8a6bdd841c75",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "72f4e844_b9dd0496",
        "filename": "armada/handlers/armada.py",
        "patchSetId": 2
      },
      "lineNbr": 472,
      "author": {
        "id": 1012987
      },
      "writtenOn": "2018-05-08T15:46:35Z",
      "side": 1,
      "message": "Good catch, it should!  No need to wait when we didn\u0027t change anything.",
      "parentUuid": "5dc07bfc_254aae74",
      "range": {
        "startLine": 467,
        "startChar": 16,
        "endLine": 472,
        "endChar": 34
      },
      "revId": "8e077040e1ee4492d7ab91db45eb8a6bdd841c75",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}